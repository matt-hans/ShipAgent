---
phase: 07-web-interface
plan: 02
type: execute
wave: 1
depends_on: []
files_modified:
  - frontend/package.json
  - frontend/vite.config.ts
  - frontend/tsconfig.json
  - frontend/tailwind.config.js
  - frontend/components.json
  - frontend/src/main.tsx
  - frontend/src/App.tsx
  - frontend/src/index.css
  - frontend/src/lib/utils.ts
  - frontend/src/components/ui/button.tsx
  - frontend/src/components/ui/input.tsx
  - frontend/src/components/ui/card.tsx
  - frontend/src/components/ui/progress.tsx
  - frontend/src/components/ui/dialog.tsx
  - frontend/src/components/ui/alert.tsx
  - frontend/src/hooks/useSSE.ts
  - frontend/src/hooks/useJobProgress.ts
  - frontend/src/types/api.ts
autonomous: true

must_haves:
  truths:
    - "React app builds and runs with Vite"
    - "Tailwind CSS styling works"
    - "shadcn/ui components are available"
    - "Custom hooks for SSE and job progress exist"
    - "TypeScript types match backend API"
  artifacts:
    - path: "frontend/package.json"
      provides: "Project dependencies and scripts"
      contains: "vite"
    - path: "frontend/src/App.tsx"
      provides: "Root React component"
      min_lines: 10
    - path: "frontend/src/hooks/useSSE.ts"
      provides: "SSE connection hook"
      exports: ["useSSE"]
    - path: "frontend/src/hooks/useJobProgress.ts"
      provides: "Job progress state hook"
      exports: ["useJobProgress"]
    - path: "frontend/src/types/api.ts"
      provides: "TypeScript types for API responses"
      exports: ["Job", "CommandSubmit", "PreviewRow"]
  key_links:
    - from: "frontend/src/hooks/useJobProgress.ts"
      to: "frontend/src/hooks/useSSE.ts"
      via: "useSSE import"
      pattern: "import.*useSSE"
    - from: "frontend/src/App.tsx"
      to: "frontend/src/components/ui"
      via: "component imports"
      pattern: "from.*components/ui"
---

<objective>
Set up React frontend with Vite, Tailwind CSS, shadcn/ui, and core infrastructure.

Purpose: Establishes the frontend project structure with styling and hooks ready for feature development.
Output: Buildable React app with shadcn/ui components, SSE hooks, and TypeScript types.
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/execute-plan.md
@~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/07-web-interface/07-CONTEXT.md
@.planning/phases/07-web-interface/07-RESEARCH.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Initialize Vite React TypeScript project with Tailwind</name>
  <files>
    frontend/package.json
    frontend/vite.config.ts
    frontend/tsconfig.json
    frontend/tailwind.config.js
    frontend/postcss.config.js
    frontend/src/index.css
    frontend/src/main.tsx
    frontend/src/App.tsx
    frontend/index.html
  </files>
  <action>
    1. Create frontend directory and initialize with Vite:
       - Use npm create vite@latest frontend -- --template react-ts
       - If already exists, ensure package.json has react, react-dom, vite dependencies

    2. Install Tailwind CSS v4:
       - npm install -D tailwindcss postcss autoprefixer
       - Create tailwind.config.js with content paths: ["./index.html", "./src/**/*.{js,ts,jsx,tsx}"]
       - Create postcss.config.js with tailwindcss and autoprefixer plugins

    3. Configure vite.config.ts:
       - Add server.proxy for /api to localhost:8000 (dev mode)
       - Set build output to dist/

    4. Set up base files:
       - src/index.css: @tailwind base; @tailwind components; @tailwind utilities;
       - src/main.tsx: Standard React 18 createRoot entry
       - src/App.tsx: Simple placeholder component with Tailwind classes
       - index.html: Standard Vite template

    Reference 07-RESEARCH.md installation commands.
  </action>
  <verify>
    cd /Users/matthewhans/Desktop/Programming/ShipAgent/frontend && npm install && npm run build
  </verify>
  <done>
    Vite React app builds successfully with Tailwind CSS configured
  </done>
</task>

<task type="auto">
  <name>Task 2: Install shadcn/ui and core components</name>
  <files>
    frontend/components.json
    frontend/src/lib/utils.ts
    frontend/src/components/ui/button.tsx
    frontend/src/components/ui/input.tsx
    frontend/src/components/ui/card.tsx
    frontend/src/components/ui/progress.tsx
    frontend/src/components/ui/dialog.tsx
    frontend/src/components/ui/alert.tsx
    frontend/src/components/ui/scroll-area.tsx
  </files>
  <action>
    1. Initialize shadcn/ui:
       - Run: npx shadcn@latest init (or create components.json manually)
       - Set style: "new-york", baseColor: "slate", cssVariables: true

    2. Create src/lib/utils.ts with cn() helper:
       - Install clsx and tailwind-merge: npm install clsx tailwind-merge
       - Export cn function: cn(...inputs) => twMerge(clsx(inputs))

    3. Add required components using shadcn CLI or manual creation:
       - button.tsx: Primary action buttons
       - input.tsx: Text input for command entry
       - card.tsx: Container for preview rows
       - progress.tsx: Progress bar for batch execution
       - dialog.tsx: Modal for label preview
       - alert.tsx: Error and warning display
       - scroll-area.tsx: Scrollable containers

    Use shadcn/ui component patterns from their documentation.
    Components should use the cn() helper and follow Radix UI patterns.
  </action>
  <verify>
    cd /Users/matthewhans/Desktop/Programming/ShipAgent/frontend && npm run build
  </verify>
  <done>
    All shadcn/ui components available and buildable
  </done>
</task>

<task type="auto">
  <name>Task 3: Create API types and custom hooks</name>
  <files>
    frontend/src/types/api.ts
    frontend/src/hooks/useSSE.ts
    frontend/src/hooks/useJobProgress.ts
    frontend/src/lib/api.ts
  </files>
  <action>
    1. Create src/types/api.ts with TypeScript types:
       - Job: id, name, status, mode, total_rows, processed_rows, etc.
       - JobRow: id, row_number, status, tracking_number, label_path, cost_cents, etc.
       - CommandSubmit: { command: string }
       - CommandSubmitResponse: { job_id: string, status: string }
       - CommandHistoryItem: { id, command, status, created_at }
       - PreviewRow: row_number, recipient_name, city_state, service, estimated_cost_cents, warnings
       - BatchPreview: job_id, total_rows, preview_rows, additional_rows, total_estimated_cost_cents
       - ProgressEvent: event type union, data payload

    2. Create src/lib/api.ts with fetch helpers:
       - submitCommand(command: string): Promise<CommandSubmitResponse>
       - getCommandHistory(): Promise<CommandHistoryItem[]>
       - getJob(jobId: string): Promise<Job>
       - getJobRows(jobId: string): Promise<JobRow[]>
       - confirmJob(jobId: string): Promise<void>
       - All use fetch with /api/v1 prefix

    3. Create src/hooks/useSSE.ts:
       - useSSE(url: string | null): { events, isConnected, error }
       - Creates EventSource when url provided
       - Parses JSON from event.data
       - Handles reconnection and cleanup
       - Reference 07-RESEARCH.md Pattern 3

    4. Create src/hooks/useJobProgress.ts:
       - useJobProgress(jobId: string | null): { progress, status, error }
       - Uses useSSE internally
       - Maps SSE events to progress state: { processed, total }
       - Handles batch_completed, row_completed, batch_failed events

    Reference 07-RESEARCH.md for SSE hook implementation.
  </action>
  <verify>
    cd /Users/matthewhans/Desktop/Programming/ShipAgent/frontend && npm run build && npx tsc --noEmit
  </verify>
  <done>
    TypeScript types, API helpers, and SSE hooks available for feature components
  </done>
</task>

</tasks>

<verification>
1. Run: cd frontend && npm install (all dependencies install)
2. Run: cd frontend && npm run build (builds to dist/ without errors)
3. Run: cd frontend && npm run dev (dev server starts on port 5173)
4. Run: cd frontend && npx tsc --noEmit (no TypeScript errors)
5. Check: frontend/dist/index.html exists after build
</verification>

<success_criteria>
- [ ] frontend/package.json has react, vite, tailwindcss dependencies
- [ ] npm run build succeeds and creates frontend/dist/
- [ ] Tailwind CSS classes work in components
- [ ] shadcn/ui components (button, input, card, etc.) are available
- [ ] useSSE hook connects to EventSource and parses events
- [ ] useJobProgress hook tracks batch progress from SSE
- [ ] TypeScript types match backend API schemas
- [ ] Vite dev server proxies /api to FastAPI backend
</success_criteria>

<output>
After completion, create `.planning/phases/07-web-interface/07-02-SUMMARY.md`
</output>
