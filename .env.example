# ShipAgent Environment Variables
# Copy this file to .env and fill in your credentials

# =============================================================================
# Anthropic API Configuration
# =============================================================================
# Your Anthropic API key (required)
ANTHROPIC_API_KEY=your_anthropic_api_key

# Claude model for orchestration (optional).
# Preferred key: AGENT_MODEL
# Legacy key (still supported): ANTHROPIC_MODEL
# Default if unset: claude-haiku-4-5-20251001
AGENT_MODEL=claude-haiku-4-5-20251001

# =============================================================================
# UPS MCP Configuration
# =============================================================================
# Get these from the UPS Developer Portal: https://developer.ups.com
UPS_CLIENT_ID=your_ups_client_id
UPS_CLIENT_SECRET=your_ups_client_secret
# UPS Account Number — required for pickup scheduling, paperless docs,
# landed cost quotes, and shipment billing. Most v2 tools use this as fallback.
UPS_ACCOUNT_NUMBER=your_ups_account_number

# Required for deterministic filter-confirmation tokens.
# Generate with: openssl rand -hex 32
FILTER_TOKEN_SECRET=replace-with-64-char-hex-secret

# Batch preview cap (default 50). Set to 0 to rate all rows.
BATCH_PREVIEW_MAX_ROWS=50

# Concurrent UPS calls for preview/execute (default 5)
BATCH_CONCURRENCY=5

# Optional: Custom directory for label output (defaults to PROJECT_ROOT/labels)
# UPS_LABELS_OUTPUT_DIR=/custom/path/to/labels

# Database URL (canonical setting). For Docker, use:
# DATABASE_URL=sqlite:////app/data/shipagent.db
# For local venv defaults, this can be omitted.
# DATABASE_URL=sqlite:///./shipagent.db

# =============================================================================
# Shopify MCP Configuration
# =============================================================================
# Get these from your Shopify Admin:
# 1. Go to Settings → Apps and sales channels → Develop apps
# 2. Create a custom app named "ShipAgent Integration"
# 3. Configure Admin API scopes: read_orders, read_products, read_customers
# 4. Install the app and copy the Admin API access token

# Admin API access token (starts with shpat_)
SHOPIFY_ACCESS_TOKEN=shpat_your_access_token_here

# Your store domain (without https://)
SHOPIFY_STORE_DOMAIN=your-store.myshopify.com

# =============================================================================
# Agent Decision Audit Ledger (centralized, redacted)
# =============================================================================
# Enable centralized decision audit logging
AGENT_AUDIT_ENABLED=true

# JSONL mirror path (best effort, non-blocking)
AGENT_AUDIT_JSONL_PATH=/app/data/agent-decision-log.jsonl

# Retention window in days for DB rows and mirror pruning
AGENT_AUDIT_RETENTION_DAYS=30

# Max redacted payload bytes per event (larger payloads are truncated)
AGENT_AUDIT_MAX_PAYLOAD_BYTES=16384

# =============================================================================
# Optional API Hardening
# =============================================================================
# Protect /api/* endpoints when set. Clients must send X-API-Key.
# SHIPAGENT_API_KEY=your_api_key_here

# Comma-separated CORS allowlist. Unset means same-origin only.
# ALLOWED_ORIGINS=http://localhost:5173,http://127.0.0.1:5173
